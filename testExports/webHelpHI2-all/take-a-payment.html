<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-colors-preset="contrast" data-primary-color="#1D70B8"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-03-18T11:12:25.289109"><title>Take a payment | GOV.UK Pay technical documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"creating-a-payment","level":0,"title":"Creating a payment","anchor":"#creating-a-payment"},{"id":"receiving-the-api-response","level":0,"title":"Receiving the API response","anchor":"#receiving-the-api-response"},{"id":"track-the-progress-of-a-payment","level":0,"title":"Track the progress of a payment","anchor":"#track-the-progress-of-a-payment"},{"id":"choose-the-return-url-and-match-your-users-to-payments","level":0,"title":"Choose the return URL and match your users to payments","anchor":"#choose-the-return-url-and-match-your-users-to-payments"},{"id":"accepting-your-users-when-they-return","level":0,"title":"Accepting your users when they return","anchor":"#accepting-your-users-when-they-return"},{"id":"when-your-user-does-not-complete-their-payment-journey","level":0,"title":"When your user does not complete their payment journey","anchor":"#when-your-user-does-not-complete-their-payment-journey"},{"id":"cancel-a-payment-that-s-in-progress","level":0,"title":"Cancel a payment thatâ€™s in progress","anchor":"#cancel-a-payment-that-s-in-progress"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet"><link rel="icon" type="image/x-icon" sizes="16x16" href="images/crown-favicon.ico"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Take a payment | GOV.UK Pay technical documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="GOV.UK Pay technical documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="take-a-payment.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Take a payment | GOV.UK Pay technical documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "take-a-payment.html#webpage",
    "url": "take-a-payment.html",
    "name": "Take a payment | GOV.UK Pay technical documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "/#website",
    "url": "/",
    "name": "GOV.UK Pay technical documentation Help"
}</script><!-- End Schema.org --></head><body data-id="take-a-payment" data-main-title="Take a payment" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>GOV.UK Pay technical documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="take-a-payment" id="take-a-payment.md">Take a payment</h1><p id="c3dd2d00_2232">This section tells you how to take a payment using the GOV.UK Pay API.</p><p id="c3dd2d00_2233">If you want to take payments using our no-code solution, you can use <a href="https://www.payments.service.gov.uk/govuk-payment-pages/" id="c3dd2d00_2234" data-external="true" rel="noopener noreferrer">payment links</a>.</p><p id="c3dd2d00_2235">When your user makes a payment, your service should supply a <code class="code" id="c3dd2d00_2236">reference</code>. If possible, this should be a unique identifier for the payment. If your organisation already has an existing identifier for payments, you can use it as this <code class="code" id="c3dd2d00_2237">reference</code>.</p><p id="c3dd2d00_2238">Your service will also need to supply a <a href="#choose-the-return-url-and-match-your-users-to-payments" id="c3dd2d00_2239" data-tooltip="For security reasons, GOV.UK Pay does not add the payment_id or outcome to your return_url as parameters."><code class="code" id="c3dd2d00_2240">return_url</code></a>. This is a URL that your service hosts for your user to return to, after their payment journey on GOV.UK Pay ends.</p><section class="chapter"><h2 id="creating-a-payment" data-toc="creating-a-payment">Creating a payment</h2><p id="c3dd2d00_2241">The endpoint to create a payment with the GOV.UK Pay API is:</p><p id="c3dd2d00_2242"><code class="code" id="c3dd2d00_2243">POST /v1/payments</code></p><p id="c3dd2d00_2244">You must send the following parameters in your request body when creating a payment:</p><ul class="list _ul" id="c3dd2d00_2245"><li class="list__item" id="c3dd2d00_2246"><p>the amount the user will pay, in pence (<code class="code" id="c3dd2d00_2247">amount</code>)</p></li><li class="list__item" id="c3dd2d00_2248"><p>a reference to help you identify the payment (<code class="code" id="c3dd2d00_2249">reference</code>)</p></li><li class="list__item" id="c3dd2d00_2250"><p>a human-readable description of the purpose of the payment (<code class="code" id="c3dd2d00_2251">description</code>)</p></li><li class="list__item" id="c3dd2d00_2252"><p>a URL to redirect your user to after they complete their payment (<code class="code" id="c3dd2d00_2253">return_url</code>)</p></li></ul><p id="c3dd2d00_2254">This example request creates a &pound;145 council tax payment:</p><div class="tabs" id="c3dd2d00_2255"><div class="tabs__content" data-gtm="tab" id="c3dd2d00_2256" data-title="cURL"><div class="code-block" data-lang="json" data-title="JSON">
curl --location &quot;https://publicapi.payments.service.gov.uk/v1/payments&quot; --H &quot;Authorization: Bearer {API_TEST_KEY}&quot; --H &quot;Content-Type: application/json&quot; 
--data &quot;{
  &quot;amount&quot;: 14500,
  &quot;reference&quot; : &quot;12345&quot;,
  &quot;description&quot;: &quot;Pay your council tax&quot;,
  &quot;return_url&quot;: &quot;https://your.service.gov.uk/completed&quot;
}&quot;
</div></div><div class="tabs__content" data-gtm="tab" id="c3dd2d00_2258" data-title="Python"><div class="code-block" data-lang="python" data-title="Python">
import http.client
import json
conn = http.client.HTTPSConnection(&quot;publicapi.payments.service.gov.uk&quot;)
payload = json.dumps({
&quot;amount&quot;: 12000,
&quot;reference&quot;: &quot;12345&quot;,
&quot;description&quot;: &quot;You have committed a crime against fashion and must pay a fine.&quot;,
&quot;return_url&quot;: &quot;https://stripe.com/docs/payments/checkout/custom-success-page&quot;
})
headers = {
'Authorization': 'Bearer API_TEST_KEY',
'Content-Type': 'application/json'
}
conn.request(&quot;POST&quot;, &quot;/v1/payments&quot;, payload, headers)
res = conn.getresponse()
data = res.read()
print(data.decode(&quot;utf-8&quot;))
</div></div><div class="tabs__content" data-gtm="tab" id="c3dd2d00_2261" data-title="Go"><div class="code-block" data-lang="go" data-title="Go">
package main
import (
&quot;fmt&quot;
&quot;strings&quot;
&quot;net/http&quot;
&quot;io/ioutil&quot;
)
func main() {
url := &quot;https://publicapi.payments.service.gov.uk/v1/payments&quot;
method := &quot;POST&quot;
payload := strings.NewReader()
client := &amp;http.Client {
}
req, err := http.NewRequest(method, url, payload)
if err != nil {
fmt.Println(err)
return
}
req.Header.Add(&quot;Authorization&quot;, &quot;Bearer API_TEST_KEY&quot;)
req.Header.Add(&quot;Content-Type&quot;, &quot;application/json&quot;)
res, err := client.Do(req)
if err != nil {
fmt.Println(err)
return
}
defer res.Body.Close()
body, err := ioutil.ReadAll(res.Body)
if err != nil {
fmt.Println(err)
return
}
fmt.Println(string(body))
}
</div></div></div><p id="c3dd2d00_2272">Depending on your integration, you can also:</p><ul class="list _ul" id="c3dd2d00_2273"><li class="list__item" id="c3dd2d00_2274"><p><span id="c3dd2d00_2275">delay taking a payment</span></p></li><li class="list__item" id="c3dd2d00_2276"><p><span id="c3dd2d00_2277">prefill some of the fields on the user's payment page</span></p></li><li class="list__item" id="c3dd2d00_2278"><p><span id="c3dd2d00_2279">add custom metadata to a payment</span></p></li><li class="list__item" id="c3dd2d00_2280"><p><span id="c3dd2d00_2281">use Welsh on your payment pages</span></p></li><li class="list__item" id="c3dd2d00_2282"><p><span id="c3dd2d00_2283">take the payment over the phone</span></p></li></ul><p id="c3dd2d00_2284">Your user has 90 minutes to complete their payment once you have created it.</p><p id="c3dd2d00_2285">You can see definitions, values, and the limits of every parameter for this endpoint in our <span id="c3dd2d00_2286">API reference</span>.</p><section class="chapter"><h3 id="amount" data-toc="amount">amount</h3><p id="c3dd2d00_2287">The <code class="code" id="c3dd2d00_2288">amount</code> parameter sets the payment amount in pence. <code class="code" id="c3dd2d00_2289">amount</code> must be a number.</p><p id="c3dd2d00_2290">The minimum amount is one pence plus your payment service provider's (PSP's) transaction fee. To see your PSP's transaction fee, check your contract by either:</p><ul class="list _ul" id="c3dd2d00_2291"><li class="list__item" id="c3dd2d00_2292"><p>signing in to the <a href="https://selfservice.payments.service.gov.uk/login" id="c3dd2d00_2293" data-external="true" rel="noopener noreferrer">GOV.UK Pay admin tool</a> if you use Stripe</p></li><li class="list__item" id="c3dd2d00_2294"><p><a href="mailto:serviceteam.gbs@hmrc.gov.uk" id="c3dd2d00_2295" data-external="true">contacting Government Banking</a> if you are using Worldpay</p></li><li class="list__item" id="c3dd2d00_2296"><p>asking your PSP</p></li></ul><p id="c3dd2d00_2297">The maximum amount is either:</p><ul class="list _ul" id="c3dd2d00_2298"><li class="list__item" id="c3dd2d00_2299"><p>10,000,000 pence (&pound;100,000)</p></li><li class="list__item" id="c3dd2d00_2300"><p>500,000 pence (&pound;5,000) if you use Government Banking</p></li></ul></section></section><section class="chapter"><h2 id="receiving-the-api-response" data-toc="receiving-the-api-response">Receiving the API response</h2><p id="c3dd2d00_2301">If your request to create a payment succeeds, you'll receive a response that looks like this:</p><div class="code-block" data-lang="json">
{
  &quot;created_date&quot;: &quot;2020-03-03T16:17:19.554Z&quot;,
  &quot;state&quot;: {
    &quot;status&quot;: &quot;created&quot;,
    &quot;finished&quot;: false
  },
  &quot;_links&quot;: {
    &quot;self&quot;: {
      &quot;href&quot;: &quot;https://publicapi.payments.service.gov.uk/v1/payments/hu20sqlact5260q2nanm0q8u93&quot;,
      &quot;method&quot;: &quot;GET&quot;
   },
    &quot;next_url&quot;: {
      &quot;href&quot;: &quot;https://www.payments.service.gov.uk/secure/bb0a272c-8eaf-468d-b3xf-ae5e000d2231&quot;,
      &quot;method&quot;: &quot;GET&quot;
    },
    ...
  },
  &quot;amount&quot;: 14500,
  &quot;reference&quot; : &quot;12345&quot;,
  &quot;description&quot;: &quot;Pay your council tax&quot;,
  &quot;return_url&quot;: &quot;https://your.service.gov.uk/completed&quot;,
  &quot;payment_id&quot;: &quot;hu20sqlact5260q2nanm0q8u93&quot;,
  &quot;payment_provider&quot;: &quot;worldpay&quot;,
  &quot;provider_id&quot;: &quot;10987654321&quot;,
  ...
}
</div><p id="c3dd2d00_2303">This response includes:</p><ul class="list _ul" id="c3dd2d00_2304"><li class="list__item" id="c3dd2d00_2305"><p>the details you sent in your request (<code class="code" id="c3dd2d00_2306">amount</code>, <code class="code" id="c3dd2d00_2307">description</code>, <code class="code" id="c3dd2d00_2308">reference</code>, <code class="code" id="c3dd2d00_2309">return_url</code>)</p></li><li class="list__item" id="c3dd2d00_2310"><p>the unique ID GOV.UK Pay assigned to this payment (<code class="code" id="c3dd2d00_2311">payment_id</code>)</p></li><li class="list__item" id="c3dd2d00_2312"><p>the unique ID your PSP assigned to this payment (<code class="code" id="c3dd2d00_2313">provider_id</code>)</p></li><li class="list__item" id="c3dd2d00_2314"><p>the date and time you created the payment (<code class="code" id="c3dd2d00_2315">created_date</code>)</p></li><li class="list__item" id="c3dd2d00_2316"><p>the URL the paying user will visit to make this payment (<code class="code" id="c3dd2d00_2317">_links.next_url</code>)</p></li><li class="list__item" id="c3dd2d00_2318"><p>the URL and method you can use to check the status of this payment (<code class="code" id="c3dd2d00_2319">_links.self</code>)</p></li><li class="list__item" id="c3dd2d00_2320"><p>other URLs and API methods for further actions for this payment (<code class="code" id="c3dd2d00_2321">_links</code>)</p></li></ul><p id="c3dd2d00_2322">You can see full definitions and values for every response attribute in our <span id="c3dd2d00_2323">API reference</span>.</p><p id="c3dd2d00_2324">Read more about <span id="c3dd2d00_2325">reporting and reconciliation</span> and <span id="c3dd2d00_2326">payment flow</span>.</p><aside class="prompt" data-type="warning" data-title="" id="c3dd2d00_2327"><p id="c3dd2d00_2328">Do not expose the <code class="code" id="c3dd2d00_2329">next_url</code> to anyone other than your paying user. Anyone in possession of the <code class="code" id="c3dd2d00_2330">next_url</code> could hijack your user&rsquo;s payment.</p></aside></section><section class="chapter"><h2 id="track-the-progress-of-a-payment" data-toc="track-the-progress-of-a-payment">Track the progress of a payment</h2><p id="c3dd2d00_2331">You can track the progress of a payment by <span id="c3dd2d00_2332">getting information about it from the reporting API</span> or <span id="c3dd2d00_2333">by receiving automatic updates through a webhook</span>.</p><p id="c3dd2d00_2334">The status of the payment will pass through several states until it either succeeds or fails. Read more about the <a href="https://docs.payments.service.gov.uk/api_reference/#payment-status-lifecycle" id="c3dd2d00_2335" data-external="true" rel="noopener noreferrer">payment status lifecycle in our API reference</a>.</p></section><section class="chapter"><h2 id="choose-the-return-url-and-match-your-users-to-payments" data-toc="choose-the-return-url-and-match-your-users-to-payments">Choose the return URL and match your users to payments</h2><p id="c3dd2d00_2336">For security reasons, GOV.UK Pay does not add the <code class="code" id="c3dd2d00_2337">payment_id</code> or outcome to your <code class="code" id="c3dd2d00_2338">return_url</code> as parameters.</p><p id="c3dd2d00_2339">You must <span id="c3dd2d00_2340">use HTTPS for your <code class="code" id="c3dd2d00_2341">return_url</code></span>, but you can use HTTP with test accounts.</p><p id="c3dd2d00_2342">You can match your users with payments with an encrypted cookie, or by creating a secure random ID:</p><section class="chapter"><h3 id="use-an-encrypted-cookie" data-toc="use-an-encrypted-cookie">Use an encrypted cookie</h3><p id="c3dd2d00_2343">You can use an encrypted cookie containing the payment ID from GOV.UK Pay. Your service should issue this when you create a payment, before sending your user to <code class="code" id="c3dd2d00_2344">next_url</code>. Your users will not be able to decrypt an encrypted cookie, so a malicious user could not alter the payment ID and intercept other users&rsquo; payments.</p></section><section class="chapter"><h3 id="create-a-secure-random-id" data-toc="create-a-secure-random-id">Create a secure random ID</h3><p id="c3dd2d00_2345">You can create a secure random ID, such as a UUID, and include this as part of the <code class="code" id="c3dd2d00_2346">return_url</code>. You should use a different <code class="code" id="c3dd2d00_2347">return_url</code> for each payment. Malicious users will be unable to guess securely generated UUIDs.</p><p id="c3dd2d00_2348">If you use this method, you should store your IDs safely. For example, in a datastore mapped to the payment ID just after you create a payment.</p><aside class="prompt" data-type="warning" data-title="" id="c3dd2d00_2349"><p id="c3dd2d00_2350">Make sure the way you match your returning users to payments is tamper-proof. For example, don&rsquo;t store the payment ID in an unencrypted cookie or rely on a <code class="code" id="c3dd2d00_2351">return_url</code> parameter that isn&rsquo;t secret (like the payment ID or reference).</p></aside></section></section><section class="chapter"><h2 id="accepting-your-users-when-they-return" data-toc="accepting-your-users-when-they-return">Accepting your users when they return</h2><p id="c3dd2d00_2352">If your user is directed to the <code class="code" id="c3dd2d00_2353">return_url</code>, they could have:</p><ul class="list _ul" id="c3dd2d00_2354"><li class="list__item" id="c3dd2d00_2355"><p>paid successfully</p></li><li class="list__item" id="c3dd2d00_2356"><p>not paid because their card was rejected, or they selected cancel</p></li><li class="list__item" id="c3dd2d00_2357"><p>not paid because your service (via the API) cancelled the payment in progress</p></li><li class="list__item" id="c3dd2d00_2358"><p>not paid because of a technical error</p></li></ul><p id="c3dd2d00_2359">Your service should use a <code class="code" id="c3dd2d00_2360">GET /v1/payments/{PAYMENT_ID}</code> request to <a href="https://docs.payments.service.gov.uk/reporting/#get-information-about-a-single-payment" id="c3dd2d00_2361" data-external="true" rel="noopener noreferrer">check the payment's status</a> when your user reaches the <code class="code" id="c3dd2d00_2362">return_url</code>. You should provide an appropriate response based on the <code class="code" id="c3dd2d00_2363">state</code> the payment attempt.</p><p id="c3dd2d00_2364">Do not use other API requests to check the payment&rsquo;s status. Other requests, such as <span id="c3dd2d00_2365">search payments</span>, do not update immediately and so may not be up-to-date.</p></section><section class="chapter"><h2 id="when-your-user-does-not-complete-their-payment-journey" data-toc="when-your-user-does-not-complete-their-payment-journey">When your user does not complete their payment journey</h2><p id="c3dd2d00_2366">Your user may close their browser or lose internet connectivity in the middle of their payment journey on GOV.UK Pay. In this event, GOV.UK Pay will not redirect your user back to your service.</p><p id="c3dd2d00_2367">You can still <span id="c3dd2d00_2368">check the status of these payments</span>, but you should be aware that the payment will expire 90 minutes after it was created. You can only be certain of the payment&rsquo;s status after this time.</p><p id="c3dd2d00_2369">If a <span id="c3dd2d00_2370">payment fails</span>, GOV.UK Pay will not let your user attempt the payment again with alternative card details. In this situation your user would need to return to the service to retry the payment. Your service should account for this.</p><section class="chapter"><h3 id="resume-an-incomplete-payment" data-toc="resume-an-incomplete-payment">Resume an incomplete payment</h3><p id="c3dd2d00_2371">You can send paying users back to GOV.UK Pay if they return to your service before they've finished their payment.</p><p id="c3dd2d00_2372"><span id="c3dd2d00_2373">Get information about the payment</span> to check the payment's <code class="code" id="c3dd2d00_2374">status</code>. The payment is incomplete if the <code class="code" id="c3dd2d00_2375">status</code> is one of the following:</p><ul class="list _ul" id="c3dd2d00_2376"><li class="list__item" id="c3dd2d00_2377"><p><code class="code" id="c3dd2d00_2378">created</code></p></li><li class="list__item" id="c3dd2d00_2379"><p><code class="code" id="c3dd2d00_2380">started</code></p></li><li class="list__item" id="c3dd2d00_2381"><p><code class="code" id="c3dd2d00_2382">submitted</code></p></li></ul><p id="c3dd2d00_2383">Resume the payment by redirecting the paying user to the <code class="code" id="c3dd2d00_2384">next_url</code> in the API response.</p><p id="c3dd2d00_2385">Do not reuse the <code class="code" id="c3dd2d00_2386">next_url</code> you received in the API response when you first created the payment. Each <code class="code" id="c3dd2d00_2387">next_url</code> has a unique token, so you can only use that <code class="code" id="c3dd2d00_2388">next_url</code> once.</p><p id="c3dd2d00_2389">GOV.UK Pay will take your user to a screen that's appropriate for the status of the payment and lets the paying user finish their payment. For example, if the <code class="code" id="c3dd2d00_2390">status</code> of the payment is <code class="code" id="c3dd2d00_2391">submitted</code>, we'll show the Confirm your payment page.</p><p id="c3dd2d00_2392">You cannot resume a payment if the <code class="code" id="c3dd2d00_2393">status</code> is <code class="code" id="c3dd2d00_2394">failed</code>, <code class="code" id="c3dd2d00_2395">cancelled</code>, or <code class="code" id="c3dd2d00_2396">error</code>. <span id="c3dd2d00_2397">Create a new payment</span> instead.</p></section></section><section class="chapter"><h2 id="cancel-a-payment-that-s-in-progress" data-toc="cancel-a-payment-that-s-in-progress">Cancel a payment that&rsquo;s in progress</h2><p id="c3dd2d00_2398">Your user can select a link on the payment page to cancel a payment that&rsquo;s in progress. Alternatively, you can make the following API request:</p><p id="c3dd2d00_2399"><code class="code" id="c3dd2d00_2400">POST /v1/payments/{PAYMENT_ID}/cancel</code></p><p id="c3dd2d00_2401">Replace <code class="code" id="c3dd2d00_2402">{PAYMENT_ID}</code> with the ID of the payment you are cancelling.</p><p id="c3dd2d00_2403">A <code class="code" id="c3dd2d00_2404">204</code> response indicates success. Any other response indicates an error.</p><p id="c3dd2d00_2405">You can see parameters, example requests, and example responses for this endpoint in our <span id="c3dd2d00_2406">API reference</span>.</p><section class="chapter"><h3 id="check-if-you-can-cancel-a-payment" data-toc="check-if-you-can-cancel-a-payment">Check if you can cancel a payment</h3><p id="c3dd2d00_2407">Get information about a specific payment to check if you can cancel that payment:</p><p id="c3dd2d00_2408"><code class="code" id="c3dd2d00_2409">GET /v1/payments/{PAYMENT_ID}</code></p><p id="c3dd2d00_2410">Replace <code class="code" id="c3dd2d00_2411">{PAYMENT_ID}</code> with the ID of the payment you are checking.</p><p id="c3dd2d00_2412">If the JSON response body contains a <code class="code" id="c3dd2d00_2413">&quot;cancel&quot;</code> field (in the <code class="code" id="c3dd2d00_2414">_links</code> object) that&rsquo;s not <code class="code" id="c3dd2d00_2415">null</code>, you can cancel the payment. For example:</p><div class="code-block" data-lang="none">
&quot;cancel&quot;: {
  &quot;href&quot;: &quot;https://publicapi.payments.service.gov.uk/v1/payments/hu20sqlact5260q2nanm0q8u93/cancel&quot;,
  &quot;method&quot;: &quot;POST&quot;
}
</div></section></section><div class="last-modified">Last modified: 18 March 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="reference.html" class="navigation-links__next">API reference</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script></body></html>